<div class="flex flex-col sm:flex-row items-center md:items-center sm:justify-center md:justify-center flex-auto min-w-0 bg-gray-800" *transloco="let t">

  <svg class="absolute inset-0 pointer-events-none"
    viewBox="0 0 960 540" width="100%" height="100%" preserveAspectRatio="xMidYMax slice" xmlns="http://www.w3.org/2000/svg">
    <g class="text-gray-700 opacity-25" fill="none" stroke="currentColor" stroke-width="100">
      <circle r="234" cx="196" cy="23"></circle>
      <circle r="234" cx="790" cy="491"></circle>
    </g>
  </svg>

  <!-- Dots -->
  <svg class="absolute -top-16 -right-16 text-gray-700"
    viewBox="0 0 220 192" width="220" height="192" fill="none">
    <!-- <defs>
    <pattern id="837c3e70-6c3a-44e6-8854-cc48c737b659" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse">
      <rect x="0" y="0" width="4" height="4" fill="currentColor"></rect>
    </pattern>
  </defs> -->
  <rect width="220" height="192" fill="url(#837c3e70-6c3a-44e6-8854-cc48c737b659)"></rect>
</svg>

<div class="md:flex md:items-center w-full sm:w-auto md:h-[h-50%] py-8 px-4 sm:p-12 md:p-16 sm:rounded-2xl md:rounded-none sm:shadow md:shadow-none sm:bg-card" >
  <div class="w-full max-w-80 sm:w-80 mx-auto sm:mx-0">
    <!-- Logo -->
    <div class="w-50%">
      <img src="images/logo/logo.png">
    </div>

    <!-- Title -->
    <!-- <div class="mt-8 text-4xl font-extrabold tracking-tight leading-tight">Forgot password?</div>
    <div class="mt-0.5 font-medium">No worries, we'll send you reset instructions</div> -->

    <!-- Alert -->
    @if (showAlert) {
      <fuse-alert
        class="mt-8 -mb-4"
        [appearance]="'outline'"
        [showIcon]="false"
        [type]="alert.type"
        [@shake]="alert.type === 'error'">
        {{alert.message}}
      </fuse-alert>
    }

    <!-- Forgot password form -->
    <form
      class="mt-8"
      [formGroup]="changePasswordForm"
      #changePasswordNgForm="ngForm">

      <!--Old Password -->
      <mat-form-field class="w-full h-18 text-lg" appearance="outline">
        <mat-label>{{t('Old Password')}}</mat-label>
        <input class="inputs"
          id="old"
          matInput
          [type]="hide ? 'password' : 'text'"
          [formControlName]="'oldPassword'"  #passwordField1>
          @if (passwordField1.type === 'password') {
            <mat-icon (click)="passwordField1.type === 'password' ? passwordField1.type = 'text' : passwordField1.type = 'password'" matSuffix
              class="mr-2 mt-[1px]"
            [svgIcon]="'heroicons_solid:eye'"></mat-icon>
          }
          @if (passwordField1.type === 'text') {
            <mat-icon (click)="passwordField1.type === 'password' ? passwordField1.type = 'text' : passwordField1.type = 'password'" matSuffix
              class="mr-2 mt-[1px]"
            [svgIcon]="'heroicons_solid:eye-slash'"></mat-icon>
          }
          @if (changePasswordForm.get('oldPassword').hasError('required')) {
            <mat-error>
              {{t('Old Password is required')}}
            </mat-error>
          }
          <!-- <div *ngIf="form.get('password').errors.required">Password is required</div>
          <mat-error *ngIf="changePasswordForm.get('email').hasError('email')">
            Please enter a valid email address
          </mat-error> -->
        </mat-form-field>

        <!-- New Password -->
        <mat-form-field class="w-full h-18 mt-3 text-lg" appearance="outline">
          <mat-label>{{t('New Password')}}</mat-label>
          <input matInput class="inputs"
            placeholder="Password"
            [type]="hide1 ? 'password' : 'text'"
            formControlName="newPassword" #passwordField2>
            @if (passwordField2.type === 'password') {
              <mat-icon (click)="passwordField2.type === 'password' ? passwordField2.type = 'text' : passwordField2.type = 'password'" matSuffix
                class="mr-2 mt-[1px]"
              [svgIcon]="'heroicons_solid:eye'"></mat-icon>
            }
            @if (passwordField2.type === 'text') {
              <mat-icon (click)="passwordField2.type === 'password' ? passwordField2.type = 'text' : passwordField2.type = 'password'" matSuffix
                class="mr-2 mt-[1px]"
              [svgIcon]="'heroicons_solid:eye-slash'"></mat-icon>
            }
            <!-- <mat-error *ngIf="changePasswordForm.get('newPassword').hasError('required')">
            New Password is required
          </mat-error> -->
       
        </mat-form-field>
        @if(changePasswordForm.value.newPassword !== ''){
        @if (!validate.minLength) {
            <mat-error>
              {{t('Password needs to have a minimum of eight characters!')}}
            </mat-error>
          }
          @if (!validate.digits) {
            <mat-error>
              {{t('Password needs to have atleast one number!')}}
            </mat-error>
          }
          @if (!validate.lower) {
            <mat-error>
              {{t('Password needs to have atleast one lower case letter!')}}
            </mat-error>
          }
          @if (!validate.upper) {
            <mat-error>
              {{t('Password needs to have atleast one upper case letter!')}}
            </mat-error>
          }
          @if (!validate.nonWords) {
            <mat-error>
              {{t('Password needs to have atleast one special character letter!')}}
            </mat-error>
          }
        }
        <!-- <mat-error *ngIf="!validate.minLength">
        Password needs to have a minimum of eight characters!!
      </mat-error>
      <mat-error *ngIf="!validate.digits">
        Password needs to have atleast one number!
      </mat-error> -->
      <!-- <span>{{validate.digits}},</span>
      <span>{{validate.lower}},</span>
      <span>{{validate.minLength}},</span>
      <span>{{validate.upper}},</span>
      <span>{{validate.nonWords}},</span> -->

      <!-- Confirm Password -->
      <mat-form-field class="w-full h-18 text-lg mt-3" appearance="outline">
        <mat-label>{{t('Confirm Password')}}</mat-label>
        <input matInput class="inputs"
          placeholder="Password"
          [type]="hide2 ? 'password' : 'text'"
          [formControlName]="'confirmPassword'" #passwordField>
          @if (passwordField.type === 'password') {
            <mat-icon (click)="passwordField.type === 'password' ? passwordField.type = 'text' : passwordField.type = 'password'" matSuffix
              class="mr-2 mt-[1px]"
            [svgIcon]="'heroicons_solid:eye'"></mat-icon>
          }
          @if (passwordField.type === 'text') {
            <mat-icon (click)="passwordField.type === 'password' ? passwordField.type = 'text' : passwordField.type = 'password'" matSuffix
              class="mr-2 mt-[1px]"
            [svgIcon]="'heroicons_solid:eye-slash'"></mat-icon>
          }
          <p id="message"></p>
          @if (check) {
            <mat-error>{{error2}}</mat-error>
          }
        </mat-form-field>

        <!-- Submit button -->
        <button
          class="fuse-mat-button-large w-full mt-3"
          mat-flat-button
          [color]="'primary'"
          [disabled]="changePasswordForm.disabled"
          (click)="check()">
          @if (!changePasswordForm.disabled) {
            <span>
              {{t('Save Password')}}
            </span>
          }
          @if (changePasswordForm.disabled) {
            <mat-progress-spinner
              [diameter]="24"
            [mode]="'indeterminate'"></mat-progress-spinner>
          }
        </button>

        <!-- Form footer -->
        <div class="mt-8 text-md font-medium text-secondary">
          <!-- <span>Return to</span> -->
          <a
            class="ml-1 text-primary-500 hover:underline"
            (click)="returnLogin()"> {{t('Cancel')}}
          </a>
        </div>

      </form>
    </div>
  </div>
</div>

